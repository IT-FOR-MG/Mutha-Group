package com.muthagroup.controller;

import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
 
public class Get_rmComsume_Controller extends HttpServlet {
	private static final long serialVersionUID = 1L;
 
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		try {
			String company = "";
			company = request.getParameter("company");         
			// *************************************************************************************************************
			SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd"); 
			Date convertedfromDate = formatter.parse(request.getParameter("date_fromrm"));
			String from = formatter.format(convertedfromDate);
			Date convertedtoDate = formatter.parse(request.getParameter("date_torm"));
			String to = formatter.format(convertedtoDate);
			// *************************************************************************************************************
			 
			from = from.replaceAll("[-+.^:,]", "");
			to = to.replaceAll("[-+.^:,]", "");
			System.out.println("Dates = " + from+"\n" + to);
			
			// *************************************************************************************************************
			  
			if (company != "" && from != "" && to != "") {
				if (company.equalsIgnoreCase("101")) {
					response.sendRedirect("RM_Consumption.jsp?comp="+ company + "&from=" + from + "&to=" + to);
				}
				if (company.equalsIgnoreCase("102")) {
					response.sendRedirect("RM_Consumption.jsp?comp="+ company + "&from=" + from + "&to=" + to);
				}
			}
			// exec "H25ERP"."dbo"."Sel_GRNRegister";1 '102', '0', '2025,2026', '20140401', '20140430', '103'
			// exec "H25ERP"."dbo"."Sel_RptBOMRawMaterial";1 '101010095910101012081010100001101010000210101000031010100004101010000510101000091010100010101010001110101000871010100012101010001310101000151010100017101010056710101007551010100022101010002310101000241010100025101010002610101009471010100028101010002910101009481010100033101010063610101010641010101065101010106610101007161010100036101010003910101000401010100041101010004210101000451010101143101010113710101011441010100640101010004810101006411010100050101010005110101011761010100592101010098310101009821010100601101010055810101005571010100556101010078010101000521010100053101010012610101001271010100083101010104110101011921010100998101010102310101010191010100632101010005510101011781010101207101010061710101005691010100056101010005710101011141010101039101010101210101000581010100577101010057810101007151010100579101010056810101001301010100945101010006110101000631010100064101010006510101011571010100062101010114610101011471010101148101010058110101001471010101129101010082710101001951010100150101010071710101006991010100764101010006810101001991010100200101010042410101004251010101001101010055510101011001010101087101010007010101000711010100596101010007310101000721010101150101010077910101001341010100860101010068010101008791010100869101010112010101009411010101051101010105210101010531010101089101010098510101009861010101193101010083710101004281010100429101010102010101010221010100431101010086110101008901010100891101010102510101010301010101026101010007410101000791010100807101010007510101010111010100081101010102110101002781010100279101010059110101000821010100623101010102710101010281010100743101010074410101004591010100821101010103810101004601010101018101010097510101009761010100973101010097410101009781010101032101010098910101010951010100980101010098410101009791010100570101010105410101010551010101058101010105910101009811010100987101010098810101000891010100088101010009010101000911010100092101010009310101006221010100619101010009410101004851010101124101010062010101000961010101167101010118010101011811010100136101010062910101008631010101044101010117510101007781010100286101010099710101011491010100652101010012110101006341010101111101010111010101011121010101077101010107610101011681010100101101010116610101010361010101071101010037910101010931010101184101010064210101001051010100107101010016810101010721010100586101010100010101005081010100894101010080310101005621010100111101010108510101007351010100571101010101310101010141010100633101010101510101010161010100112101010101710101010291010100766101010058910101005361010100316101010089610101009441010100559101010108610101005431010100544101010054510101008921010101024101010110310101001131010101002101010108810101001141010100643101010119010101006821010101060101010106110101001151010100874101010011710101001181010100810101010081710101008111010100818101010099310101009501010100949101010099410101001201010101042101010031110101009511010100116101010087310101003141010100141101010011910101006921010100940101010119410101001571010100842101010015910101005531010101128101010016010101002321010100006101010000710101000081010100613101010001410101000161010100018101010001910101000201010100021101010002710101000301010100031101010003210101001091010100035101010003410101000371010100038101010004310101000441010100046101010004710101000491010100936101010005410101010631010101160101010078810101006181010100059101010016410101001701010100067101010006610101001221010100608101010006910101004321010100672101010072410101007231010100076101010007710101000781010100080101010065310101006211010100084101010008510101006101010100595101010099010101008061010100991101010008610101009771010100060101010074610101000951010100285101010009710101000981010100099101010010010101001021010101033101010103510101006301010101034101010010310101011351010100104101010010610101002441010100627101010062810101001101010100108', 101
			// select * from MSTMATERIALS where MATERIAL_TYPE=101
			// exec "H25ERP"."dbo"."Sel_RptProdWiseSaleSumm";1 '102', '0', '1151,1152,1159,1158', '20140401', '20150131'
			// 
			
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}
